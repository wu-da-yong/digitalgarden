---
{"dg-publish":true,"permalink":"/Zettelkasten/14a9a 硬字幕提取工具9.0教学/","dgPassFrontmatter":true}
---

编号:: 14a9a
标题:: 硬字幕提取工具9.0教学
创建时间:: 2023-03-11 14:19
up:: [[Zettelkasten/14a9 保存重要数据的方案\|14a9 保存重要数据的方案]]
来源:: [硬字幕提取工具9.0教学（小白教学有点长，实际使用很简单） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/410868599)

---

采用VideoSubFinder + 百度讯飞有道OCR通用文字识别云引擎（7.0版开始又内置离线OCR引擎），整合多个工具APP（为什么不好好利用别人的成果呢？），从开始到结束，整个字幕提取流程一气呵成，识别率高、省时省力**（工具包及用户使用手册，在文末下载）**

_另：拙作 “语音提词2.0”发布了！专注于**语音识别**和**字幕翻译**，是听不懂外语**啃生肉**的利器！[黃藥師：语音提词2.0(原创)](https://zhuanlan.zhihu.com/p/377447069) 采用Spleeter（分离人声）+ 断句分割算法，将视频、音频文件中的语音片段单独提取出来，通过讯飞百度ASR语音识别引擎将语音识别为文字，一键生成字幕，同时还集成了单独的SRT字幕、txt/doc/docx文件翻译工具。_

## 二、 初次使用本软件

总体来说，三个大步骤：

1、将字幕从视频中截取下来

2、将字幕图片OCR识别为文字

3、校对字幕和时间轴

具体步骤如下所述，使用过程中遇到任何问题，**可到文末查看Q&A解决。**

### 步骤1、准备工作流程中将会用到的APP1、APP2第三方APP软件 + 硬字幕提取工具

第三方APP软件 + 硬字幕提取工具在文末下载，记得下载最新版本及**更新**，下载后解压到非C盘。（第三方APP也可以到下面地址下载）。

![](https://pic4.zhimg.com/v2-ed065543d7c9494b76d142cc9b58a043_b.png)

### 步骤2、准备百度OCR服务APP\_ID / API\_KEY / SECRET\_KEY

![](https://pic3.zhimg.com/v2-8a9f848b494a61583bf60056eb88c83e_b.jpg)

百度网页-->产品服务 / 文字识别-->创建应用，记得点“领取免费资源”。

**_注：工具默认采用百度OCR，如果没时间注册百度OCR，可以跳过本步骤，并如下图在步骤3中改选离线OCR引擎“tr“（tr引擎目前只支持中英文字幕），其他步骤不变。_**

![](https://pic1.zhimg.com/v2-37be22a93a138ee8e0c13a5aa1eafcf4_b.png)

### 步骤3、设置硬字幕提取工具

打开工具，

![](https://pic4.zhimg.com/v2-e1ff55a4658f2c34fe7579d6d74c8e4b_b.jpg)

点击‘系统设置’

填入步骤1获得的百度OCR服务APP\_ID / API\_KEY / SECRET\_KEY

点Browse找到步骤2安装好的APP的入口exe文件，APP1 - APP2顺序不要错，然后Save保存设置。

![](https://pic4.zhimg.com/v2-8ae5f185a0c7bcd1bb49396a9be4b81b_b.jpg)

这时，主界面的APP1、APP2按键将显示刚才设置好的exe文件名

![](https://pic1.zhimg.com/v2-57e099bfa274c2447216a53ac10d6c38_b.jpg)

### 步骤4、用VideoSubFinder\_5.50\_x64生成RGBImages

点击主界面VideoSubF按键，将启动运行VideoSubFinder\_5.50\_x64

![](https://pic2.zhimg.com/v2-30e961bae5e503c3bb3f44e35150ff55_b.jpg)

点击左上角**File -> Open Video(FFMPEG)**(如运行出现崩溃请改用opencv)，打开要提取字幕的视频文件（本例为：倚天屠龙记之魔教教主-中字.mp4）

快速浏览全片，查看字幕区间矩形最大范围（注意有些视频是两层字幕），用两根竖线两根横线设置字幕截图区间（四根线在视频边缘不容易发现，试着点击选中可以移动它）。**注意：矩形边框要比实际字幕稍大，不要为了节省图片尺寸而把区间设置成紧贴字幕（当然也没必要设置得太宽松，图片高度增大会导致叠图数降低，浪费额度）。**

![](https://pic3.zhimg.com/v2-cc9fe21770cbecce6dbb867f73e95ffe_b.jpg)

点击Search右边的Settings，出现设置界面，我们只关心左边这块能影响Search字幕图片的参数。

![](https://pic3.zhimg.com/v2-ebd76ccc2f89bc4bf20e02c2ac2e6fe6_b.jpg)

**第一个参数‘Text Alignment’默认设置是‘Center’，须点击设置成‘Any’。**

其他众多参数中，有一个参数至关重要，就是Use Filter Colors这项，default值是空的，其他参数可以不设，这个一定要设置上，特别是非纯白字幕，例如黄色！如果不设置，有大几率会漏字幕。

**我们需要取色字幕文字的骨干颜色（骨干外则是字幕轮廓颜色，不要取偏了），然后将颜色值填入，将有助于VideoSubFinder判断字幕出现和结束的时间，生成正确的时间轴信息，并防止丢时间轴**。常见字幕颜色可能有白色的、黄色的，或者其他颜色，本例电影的字幕是白色。如果是多色字幕，可以按VSF要求取色多色填入，如果字幕轮廓明显，可以取色填入Outline Filter Colors（具体可以参考Docs目录下的readme\_eng.txt），注意，如果下面发现Search出来的字幕有较多重复，可以尝试不做取色这步，也就是用VSF的默认设置来Search，因为有些视频的字幕不适合取色，这需要读者后续多用多积累经验。

具体的参数设置，可以参考Docs目录下的readme\_eng.txt，专业用户精调参数可以提高Search字幕帧的准确率，从而减少丢时间轴（少字幕图片，致命）和假时间轴（空字幕图片，影响不大）的情况，不过据笔者使用经验，如果没弄明白参数含义和作用，随意调整反而适得其反，普通用户还不如不调的好。

在右边界面先点一下Pixel Color

![](https://pic4.zhimg.com/v2-299c1a5eaea18e73239b10b14190d457_b.jpg)

然后点击字幕白色文字中心骨干取色，点不准可以多点几下。

![](https://pic4.zhimg.com/v2-9539f90c93f84bc00265f67efbf5bccb_b.jpg)

取到了颜色，会显示出来

![](https://pic2.zhimg.com/v2-5e9d9822fbbebc1eaa8ddd144bc2fa91_b.jpg)

本例将Lab: l:245 a:127 b:129 拷贝后双击填入Use Filter Colors，一般做了这步就可以基本保证不会有时间轴丢失的情况，算是完成了Search的设置。

![](https://pic4.zhimg.com/v2-021a7e09b44a50917e71d37bdbf1a277_b.jpg)

**点击Search -> Clear Foders 清空RGBImages目录（注意：每次操作一个新视频不要忘记这个步骤），**

**然后点 Run Search，**程序开始扫描视频文件，生成RGBImages。

![](https://pic1.zhimg.com/v2-6e15f94fd428d572cb9bef05ee12f3ac_b.jpg)

几分钟后扫描完成，可以关掉VideoSubFinder\_5.50\_x64，初次使用我们可以打开RGBImages目录看一下

![](https://pic1.zhimg.com/v2-f87f57681bcfe90f22be1dbb6f2c9384_b.jpg)

这些是刚才VideoSubFinder\_5.50\_x64 Search生成的1000多个字幕切片图片文件，说明这个电影有1000多条字幕呢。文件名前段为时间轴信息。

打开文件看看，是RGB原色字幕截图切片，很适合喂给百度AI过的OCR引擎做识别。

![](https://pic3.zhimg.com/v2-6ebe6622e19a1fca4361114dc829601e_b.jpg)

### 步骤5、清理空字幕图片

点击主界面上的‘删合’按键，将打开‘删合窗’并自动定位到RGBImages目录，

我们可以在‘删合窗’中清除RGBImages目录中的空字幕图片。

由于VideoSubFinder 的Search算法还没做到100%准确，所以会误生成少量无字幕图片（假时间轴），有时还会把广告也截图下来，我们在‘删合窗’中用鼠标滚轮快速浏览RGBImages目录，把发现的空字幕、广告水印图片删掉，让后续百度OCR识别不用浪费每天数量额度，同时在校对阶段不用再做删除工作。

一页可以显示50~125张图片（默认75张），浏览、选中、删除非常方便。

翻页：点击<<<、>>>按键，或键盘PgUp/PgDn键、↑/↓键、键盘←/→键，或将鼠标指针停留在图片区，滚动鼠标滚轮，可以翻页（一次滚动4列）

选中：鼠标左键 点击可以标记选中图片，再次点击可以去选中。Shift+鼠标左键可以连续多选、连续去选。

删除：直到最后一页标记完成，点面板上的‘总删合’按键会弹出删除提示，确认后将删除所有标记过的空图片。

更多方便的功能（例如**合并重复字幕**）可以看“第四节之6、 删合窗（删除合并）”

如下图一处为广告字幕，可以选中标记它：

![](https://pic2.zhimg.com/v2-063c5205804e9d8c8d9033594f48ab71_b.jpg)

如下图一处为空字幕图片，可以选中标记它：

![](https://pic2.zhimg.com/v2-298ea4d8456f5ae4573b3fca4d40847d_b.jpg)

一直标记到最后一页：

![](https://pic4.zhimg.com/v2-d4bb54b5a2a925da018e64f83f9cc20f_b.jpg)

然后点‘总删合’，确认后将会把刚才所有标记过的空字幕、广告水印图片删除（如果发现不能删除，多半是系统权限问题，请不要将VSF和本工具安装在C盘或桌面）：

![](https://pic3.zhimg.com/v2-928dc25b1b148a44514034eada5c7a6a_b.jpg)

清理完无用字幕图片后，点击面板上的‘返回主界面’。

### 步骤6、运行百度OCR识别

**百度高精度识别免费额度较少（**通用文字识别（高精度版）即A模式通用高精、网络图片文字识别即W模式中文高精，两种模式都是1000次/月（须实名认证），识别率都比较高，也就是说一个账号每月可以有2000次高精度免费额度，如果再注册多几个账号（本软件最多可5个）则总免费额度还能增加几倍**），如不采用叠图技术（ 多张字幕图片叠成一张大图来识别）以节省额度（10倍左右），每月只能识别较少字幕图片，因此，如果用户没有购买额度，或者即使购买了额度又想节省额度，应该在系统设置中选上叠图，并保存设置**。

![](https://pic1.zhimg.com/v2-a9c4221dda130bc9c8ecf664d5a5cef8_b.jpg)

如果是单行的字幕（如本例），在选用百度OCR高精时，还应同时勾选“识别为单行”（具体原因可看用户使用手册）

![](https://pic1.zhimg.com/v2-025227d06ee94067e1125757329afd50_b.jpg)

点击主界面的OCR按键，程序将连接百度OCR服务器，对RGBImages目录中的所有字幕图片从头到尾按顺序做识别，只需等待完成即可（如果出现网络连接问题，多数是使用了V-PN导致，请关闭保证网络正常连接）

![](https://pic4.zhimg.com/v2-f3447fea122e7ee476333f914f9b4727_b.jpg)

![](https://pic2.zhimg.com/v2-c053a6c0b8d0d172adea089de0a6aec5_b.jpg)

OCR识别完成了！（细心的用户可能会留意到：在识别过程中有少量图片会有黄色方框，一闪而过，这是因为开启了OCR识别过程自动标注空字幕的功能，由于上个手动删空步骤遗留了少量空字幕，导致OCR识别出来并做了黄框标注，如果出现这种情况，可以在下面校对过程中删除它）

这时在RGBImages目录下已经为每个.jpeg文件生成了一个同名的 .txt字幕文件，以及检测框坐标文件\_boundingbox.txt，初次使用可以看一下。

![](https://pic3.zhimg.com/v2-ae42dbd7c287cae8d1e0ae4e565c0656_b.jpg)

### **步骤7、校对字幕**

点击主界面上的‘校对’按键，将打开校对窗，校对窗显示一页4~7组（默认6组）图文。

编辑：可以用输入法进行常规的输入、删除、鼠标左键/右键插入空格、回车等操作。

识别：如果觉得刚才OCR识别的结果不理想，又懒得手动编辑，可以设置增强魔棒调色，然后双击图片，或者鼠标右键弹出菜单，再OCR识别一次。

查找替换：9.0版新增查找替换功能，具体可以看手册“第四节之7、 校对窗（补漏校对）”

翻页：点击<<<、>>>按键，或键盘PgUp/PgDn键，或将鼠标指针停留在图片区，滚动鼠标滚轮、或↑/↓键，可以翻页。翻页将**自动保存**校对修改过的文字。

删除与合并：如果在上面删合窗中有漏，则校对窗中也可做删合，ctrl+鼠标左键点击可以选中图片要删除的图片（黄框），ctrl+shift+鼠标左键点击可以选中图片要合并的图片（橙框），再次点击可以去选中。如果有选中的图片，这时按‘删合’或键盘**Delete**会弹出删除提示，OK或按回车**Enter**将执行删除与合并。 更多方便的功能（例如**‘精准对齐’，‘鼠标一键插入空格’，’字体选择’，‘字号调整’，‘每行字号大小单独调整’**）可以看手册“第四节之7、 校对窗（补漏校对）”。

如果希望在SubtitleEdit等字幕软件中做校对，可以略过这个步骤，直接到下个步骤。

![](https://pic1.zhimg.com/v2-40ac4ed1f5f0978e94af72d42f1e9c70_b.jpg)

校对完成后，如果时间轴不需要调整，则可直接生成SRT文件，至此字幕提取工作完成。

如需进行下一步用SubtitleEdit调轴，可点击面板上的‘返回主界面’。


### 步骤8、用SubtitleEdit编辑字幕文件

之所以前面在校对窗做过校对，这里又用到APP2来做编辑，是因为有些用户（例如字幕组）对字幕要求高，还需要做调轴、批量替换、方言转换等进一步校对工作。

点击主界面‘生成SRT’按键，将生成带时间轴的字幕文件123.srt，和不带时间轴的纯字幕文件123.txt（系统设置中须勾选‘同时生成.txt’）。

可以大概浏览一下，然后关掉。

![](https://pic1.zhimg.com/v2-6e4d833a28f30bd351d07370b094c608_b.jpg)

点击主界面SubtitleE按键，将自动打开SubtitleEdit编辑刚才生成的123.srt字幕文件。

![](https://pic3.zhimg.com/v2-830c8b0b247e2399c28035467589892e_b.jpg)

在波形图窗口里，“点击以添加波形”，打开视频文件，本例是‘倚天屠龙记之魔教教主-中字.mp4’

![](https://pic3.zhimg.com/v2-2949b8f46a29d9f242e08edabeafc726_b.jpg)

在波形图窗口，勾选‘选择当前播放时刻的字幕’，设定播放速度，例如200%，然后开始播放视频，字幕会同步显示在播放窗口，可随时暂停播放，进行字幕校对。

该删除的删除，该修正的修正，该替换的替换，该调轴的调轴。

一般来说，走到SubtitleEdit这步，剩下的校对工作已经不多了，有时甚至不需要校对就能用了（注重细节的用户还是认真过一遍吧）。

完成字幕校对后，点击“文件->另存为” 保存校对好的字幕文件，SubtitleEdit会自动将123.srt重命名为跟视频文件同名的srt文件“倚天屠龙记之魔教教主-中字.srt”，并保存在视频文件所在目录下，方便大多数播放软件播放视频文件时自动加载同名字幕文件。

（注意：没校对完成先不要另存到视频文件同目录下，不管另存的文件名是什么，下次加载校对时，播放器都会自动加载srt文件，导致跟视频原字幕重叠显示，不方便校对，没有校对完可以暂时另存到其他目录）

![](https://pic2.zhimg.com/v2-f4c1432560e00fc90d772ecbf52cdac5_b.jpg)

至此，整个硬字幕提取流程就走完了。

![](https://pic1.zhimg.com/v2-ec20c7be854f6027835a77527719c044_b.jpg)

更多方便强大的功能（例如合并重复字幕、精准对齐、查找替换、导入SRT、离线OCR支持、自动标注空字幕图片、SUP/IDX+SUB图形字幕提取OCR、截图拍照识别等），请花点时间阅读用户使用手册，您会发现新大陆！

